# ğŸ¤– Auto-Dev System

> Human-in-the-Loop è‡ªå‹•åŒ–é–‹ç™¼ç³»çµ±
>
> ä½¿ç”¨ [claude-code-action](https://github.com/anthropics/claude-code-action) å®˜æ–¹ GitHub Action

## å¿«é€Ÿå®‰è£

### æ–¹å¼ 1: API Key

```bash
curl -fsSL https://raw.githubusercontent.com/miles990/claude-software-skills/main/scripts/setup-auto-dev-apikey.sh | bash
```

å®‰è£å¾Œï¼š
1. åˆ° https://console.anthropic.com/settings/keys å–å¾— API Key
2. è¨­å®š GitHub Secretï¼š`ANTHROPIC_API_KEY`

### æ–¹å¼ 2: Claude Maxï¼ˆæ¨è–¦ï¼‰

```bash
curl -fsSL https://raw.githubusercontent.com/miles990/claude-software-skills/main/scripts/setup-auto-dev-max.sh | bash
```

å®‰è£å¾Œï¼š
```bash
claude /install-github-app
```
é€™æœƒè‡ªå‹•è¨­å®š `CLAUDE_CODE_OAUTH_TOKEN`ï¼ˆè²»ç”¨åŒ…å«åœ¨ Max è¨‚é–±ä¸­ï¼‰

---

## æ¯”è¼ƒ

| æ–¹å¼ | è²»ç”¨ | è¨­å®šé›£åº¦ | é©åˆ |
|------|------|----------|------|
| API Key | ç”¨é‡è¨ˆè²» | ç°¡å–® | ä¸€èˆ¬é–‹ç™¼è€… |
| Claude Max | è¨‚é–±åŒ…å« | éœ€å®‰è£ App | Max è¨‚é–±ç”¨æˆ¶ |

---

## æ¦‚è¿°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Auto-Dev æ¶æ§‹                            â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   Issue     â”‚     â”‚   GitHub    â”‚     â”‚   Claude    â”‚       â”‚
â”‚  â”‚  + Label    â”‚â”€â”€â”€â”€â†’â”‚   Actions   â”‚â”€â”€â”€â”€â†’â”‚    Code     â”‚       â”‚
â”‚  â”‚  auto-dev   â”‚     â”‚             â”‚     â”‚  + Evolve   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                    â”‚              â”‚
â”‚                             â†“                    â†“              â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚                      â”‚     PR      â”‚â†â”€â”€â”€â”€â”‚   ç¨‹å¼ç¢¼    â”‚       â”‚
â”‚                      â”‚   Review    â”‚     â”‚   è®Šæ›´      â”‚       â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                             â”‚                                   â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚               â†“             â†“             â†“                    â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚  Merge  â”‚   â”‚ /evolve â”‚   â”‚  Close  â”‚               â”‚
â”‚         â”‚   âœ…    â”‚   â”‚   âœï¸    â”‚   â”‚   âŒ    â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜               â”‚
â”‚              â”‚             â”‚             â”‚                     â”‚
â”‚              â†“             â†“             â†“                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚ è¨˜éŒ„æˆåŠŸ â”‚   â”‚ç¹¼çºŒè¿­ä»£ â”‚   â”‚ è¨˜éŒ„å¤±æ•—â”‚               â”‚
â”‚         â”‚  ç¶“é©—   â”‚   â”‚         â”‚   â”‚  æ•™è¨“   â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                             â”‚                                   â”‚
â”‚              .github/memory/ â† ç´¯ç©ç¶“é©—                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿé–‹å§‹

### 1. è¨­å®š Secrets

åœ¨ Repository Settings â†’ Secrets and variables â†’ Actions åŠ å…¥ï¼š

```
ANTHROPIC_API_KEY=sk-ant-...
```

### 2. å»ºç«‹ Issue è§¸ç™¼è‡ªå‹•é–‹ç™¼

```markdown
Title: å¯¦ä½œç”¨æˆ¶ç™»å…¥åŠŸèƒ½

Body:
éœ€æ±‚ï¼š
- Email + å¯†ç¢¼ç™»å…¥
- JWT Token é©—è­‰
- è¨˜ä½æˆ‘åŠŸèƒ½

é©—æ”¶æ¨™æº–ï¼š
- ç™»å…¥æˆåŠŸè¿”å› token
- éŒ¯èª¤æ™‚é¡¯ç¤ºé©ç•¶è¨Šæ¯
- æœ‰å–®å…ƒæ¸¬è©¦
```

ç„¶å¾ŒåŠ ä¸Š `auto-dev` labelã€‚

### 3. ç­‰å¾… PR

Bot æœƒè‡ªå‹•ï¼š
1. å»ºç«‹åˆ†æ”¯
2. åŸ·è¡Œ Claude Code + Evolve
3. æäº¤ç¨‹å¼ç¢¼
4. å»ºç«‹ PR

### 4. å¯©æŸ¥èˆ‡äº’å‹•

#### âœ… æ»¿æ„ â†’ ç›´æ¥åˆä½µ
ç³»çµ±æœƒè‡ªå‹•è¨˜éŒ„æˆåŠŸç¶“é©—

#### âœï¸ éœ€è¦èª¿æ•´ â†’ ç•™è¨€
```
/evolve ä¸è¦ç”¨ sessionï¼Œæ”¹ç”¨ JWTï¼Œå¦å¤–åŠ ä¸Š refresh token
```
Bot æœƒç¹¼çºŒåœ¨åŒä¸€å€‹ PR ä¸Šè¿­ä»£

#### â• ç™¼ç¾æ–°éœ€æ±‚ â†’ é–‹æ–° Issue
åŠ ä¸Š `auto-dev` labelï¼Œæœƒè‡ªå‹•åŠ å…¥ä½‡åˆ—

#### âŒ å®Œå…¨ä¸è¡Œ â†’ é—œé–‰ PR
ç³»çµ±æœƒè¨˜éŒ„å¤±æ•—ç¶“é©—ï¼Œé¿å…é‡è¹ˆè¦†è½

---

## è§¸ç™¼æ–¹å¼

### æ–¹å¼ 1: Issue Labelï¼ˆæ¨è–¦ï¼‰

1. å»ºç«‹ Issue æè¿°ç›®æ¨™
2. åŠ ä¸Š `auto-dev` label
3. å¯é¸ï¼šåŠ ä¸Š `priority:high` / `priority:low`

### æ–¹å¼ 2: Comment å‘½ä»¤

åœ¨ä»»ä½• Issue æˆ– PR ä¸Šï¼š
```
/evolve å¯¦ä½œ XXX åŠŸèƒ½

å¯é¸åƒæ•¸ï¼š
--priority=high
--max-iterations=15
```

### æ–¹å¼ 3: æ‰‹å‹•è§¸ç™¼

Actions â†’ Auto Development â†’ Run workflow

---

## Labels èªªæ˜

| Label | èªªæ˜ |
|-------|------|
| `auto-dev` | è§¸ç™¼è‡ªå‹•é–‹ç™¼ |
| `ğŸ¤– auto-dev` | ç”± bot å»ºç«‹çš„ PR |
| `priority:high` | é«˜å„ªå…ˆç´šï¼ˆä½‡åˆ—å„ªå…ˆè™•ç†ï¼‰ |
| `priority:low` | ä½å„ªå…ˆç´š |
| `â³ processing` | æ­£åœ¨è™•ç†ä¸­ |
| `needs-review` | ç­‰å¾…äººé¡å¯©æŸ¥ |

---

## è¨˜æ†¶ç³»çµ±

æ‰€æœ‰ç¶“é©—éƒ½å„²å­˜åœ¨ `.github/memory/`ï¼š

```
.github/memory/
â”œâ”€â”€ index.md              # å¿«é€Ÿç´¢å¼•
â”œâ”€â”€ learnings/            # æˆåŠŸç¶“é©—
â”‚   â””â”€â”€ 2025-01-05-user-login.md
â”œâ”€â”€ failures/             # å¤±æ•—æ•™è¨“
â”‚   â””â”€â”€ 2025-01-04-oauth-attempt.md
â”œâ”€â”€ decisions/            # æŠ€è¡“æ±ºç­–
â”œâ”€â”€ patterns/             # æ¨ç†æ¨¡å¼
â””â”€â”€ strategies/           # ç­–ç•¥è¨˜éŒ„
```

### ç¶“é©—æœƒè¢«å­¸ç¿’

```markdown
# ç¯„ä¾‹ï¼šlearnings/2025-01-05-jwt-preference.md

## æƒ…å¢ƒ
å¯¦ä½œèªè­‰åŠŸèƒ½

## äººé¡ Feedback
ã€Œä¸è¦ç”¨ sessionï¼Œé€™å€‹å°ˆæ¡ˆçµ±ä¸€ç”¨ JWTã€

## å­¸åˆ°çš„åå¥½
- æ­¤å°ˆæ¡ˆçš„èªè­‰ç­–ç•¥ï¼šJWT only

## å½±éŸ¿
æœªä¾†æ‰€æœ‰ auth ç›¸é—œä»»å‹™å„ªå…ˆé¸æ“‡ JWT
```

---

## å·¥ä½œæµç¨‹æª”æ¡ˆ

| æª”æ¡ˆ | åŠŸèƒ½ |
|------|------|
| `auto-dev.yml` | ä¸»è¦åŸ·è¡Œæµç¨‹ |
| `auto-dev-feedback.yml` | è™•ç†å¯©æŸ¥ feedback |
| `auto-dev-queue.yml` | ä»»å‹™ä½‡åˆ—ç®¡ç†ï¼ˆæ¯å°æ™‚ï¼‰ |

---

## é…ç½®é¸é …

### èª¿æ•´æœ€å¤§åŸ·è¡Œæ™‚é–“

```yaml
# auto-dev.yml
timeout-minutes: 60  # é è¨­ 1 å°æ™‚
```

### èª¿æ•´æœ€å¤§è¿­ä»£æ¬¡æ•¸

```yaml
# é€é label æˆ– command åƒæ•¸
/evolve --max-iterations=20 å¯¦ä½œ XXX
```

### èª¿æ•´ä½‡åˆ—è™•ç†é »ç‡

```yaml
# auto-dev-queue.yml
schedule:
  - cron: '0 */2 * * *'  # æ”¹ç‚ºæ¯ 2 å°æ™‚
```

---

## å®‰å…¨æ³¨æ„äº‹é …

1. **API Key ä¿è­·**
   - ä½¿ç”¨ GitHub Secrets
   - ä¸è¦åœ¨ç¨‹å¼ç¢¼ä¸­ç¡¬ç·¨ç¢¼

2. **åŸ·è¡Œé™åˆ¶**
   - è¨­å®šåˆç†çš„ timeout
   - è¨­å®šæœ€å¤§è¿­ä»£æ¬¡æ•¸
   - ç›£æ§ API ä½¿ç”¨é‡

3. **å¯©æŸ¥ Gate**
   - æ‰€æœ‰è®Šæ›´éƒ½éœ€è¦ PR
   - å»ºè­°é–‹å•Ÿ Branch Protection
   - é‡è¦åˆ†æ”¯è¦æ±‚ approval

4. **æˆæœ¬æ§åˆ¶**
   - ç›£æ§ Anthropic API è²»ç”¨
   - è¨­å®š budget alerts
   - è€ƒæ…®ä½¿ç”¨è¼ƒä¾¿å®œçš„æ¨¡å‹åšåˆæ­¥å·¥ä½œ

---

## å¸¸è¦‹å•é¡Œ

### Q: åŸ·è¡Œå¤±æ•—æ€éº¼è¾¦ï¼Ÿ
A: æª¢æŸ¥ Actions logï¼Œå¸¸è¦‹åŸå› ï¼š
- API Key ç„¡æ•ˆ
- ç›®æ¨™æè¿°ä¸å¤ æ˜ç¢º
- é”åˆ°è¿­ä»£ä¸Šé™

### Q: å¦‚ä½•åœæ­¢åŸ·è¡Œä¸­çš„ä»»å‹™ï¼Ÿ
A: åˆ° Actions é é¢ Cancel workflow run

### Q: PR å¤ªå¤§æ€éº¼è¾¦ï¼Ÿ
A: å°‡ç›®æ¨™æ‹†åˆ†æˆæ›´å°çš„ Issues

### Q: å¦‚ä½•è®“ bot è¨˜ä½æˆ‘çš„åå¥½ï¼Ÿ
A: åœ¨ PR review æ™‚æ˜ç¢ºèªªæ˜ï¼Œbot æœƒè¨˜éŒ„åˆ° memory

---

## æ•´åˆ GitHub Copilot

ç”±æ–¼è¨˜æ†¶å­˜åœ¨ `.github/memory/`ï¼ŒGitHub Copilot ä¹Ÿèƒ½è®€å–ï¼š

```
.github/
â”œâ”€â”€ copilot/              # Copilot è¨­å®š
â”‚   â””â”€â”€ instructions.md   # å¯å¼•ç”¨ memory
â””â”€â”€ memory/               # å…±äº«è¨˜æ†¶
    â””â”€â”€ ...
```

åœ¨ `instructions.md` ä¸­ï¼š
```markdown
åƒè€ƒ .github/memory/ äº†è§£å°ˆæ¡ˆåå¥½å’Œéå»ç¶“é©—
```
